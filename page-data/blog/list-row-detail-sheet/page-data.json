{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/list-row-detail-sheet","result":{"data":{"markdownRemark":{"html":"<h2>Goal of this post</h2>\n<p>The goal of this post is to create a list that shows each rowâ€™s detail information on a modal sheet, when we tap on a button placed at each row. </p>\n<div class=\"articleImage\" style=\"max-width: 100%; width:600px; margin: 30px auto; padding-bottom: 30px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1773px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/650ee9c831041eeb061c65a6d6d1c304/35c52/goal.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 98.64636209813875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAACE4AAAhOAFFljFgAAAB8klEQVQ4y62UTW7bMBCFtTDglRdNe4Kuml7APUzQbdA79BrpKl3aBeJeoRfwIqsgKATbRQq4Tm3R+qFI25A4r0NGUmRZSNo0BB7GEsnP88jReFGkcHPzC7e3AU5PP6Dff4eTk/dYLkPy/R+YzX4SgGPP845YotvtgqNhoa5er4dOpwMvSTaw0DjWuL72MR5f4urqu32mMJRYr2UFPDv7JC4uRhgOv5jBYIi6RqOvOD//DC9NN7xpjTw3qA9+piAlSJ1TJOJjfvWSJYrp/cW14Wm9RRAEDMhBRDDGOPFvWqVAuskpT+UbXvvC5JnIsgwsU8QDOaAQogLWREIRfsc5Dca6//EbXq8UrQE3ZxprKzmgtZxlLUDNljnD5Uq+DTO8ynJylq2RBy3bDK3NxqBAA4qBOk7sGR7xK0H0yBlKaW9ZQqkta1cXhckOidxSHKUOaJN2lhnYtHqXOVu25WJLx8aGKLFzrnxUBSw2mzaYy7CE2dgQxUVsA4Zh6KrDxvK4XIYtoHvg3R+1AqMowmQycdAS9l9ApRSm0ymklIeW/wVYbN675RL2JOBfXcpTM3w24IOF/ezAw8JW94XdUoel5UZn2q/DEqp1VumxSzn48MszLGHcmWFbvu/PnISIScpt0bn3M7T9cLFYYD6fO+12uwr6Bxi9xK22f5kdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"goal\" title=\"goal\" src=\"/static/650ee9c831041eeb061c65a6d6d1c304/35c52/goal.png\" srcset=\"/static/650ee9c831041eeb061c65a6d6d1c304/35c52/goal.png 1773w\" sizes=\"(max-width: 1773px) 100vw, 1773px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n</div>\n<h2>Presenting a Sheet</h2>\n<p>There are two ways to present a sheet using a view modifier. </p>\n<ol>\n<li>binding a sheet to a boolean<br>\n-> <a href=\"https://developer.apple.com/documentation/swiftui/view/sheet(ispresented:ondismiss:content:)\"><code class=\"language-text\">sheet(isPresented:onDismiss:content:)</code></a></li>\n<li>binding a sheet to an item that acts as a data source for the sheet<br>\n-> <a href=\"https://developer.apple.com/documentation/swiftui/view/sheet(item:ondismiss:content:)\"><code class=\"language-text\">sheet(item:onDismiss:content:)</code></a></li>\n</ol>\n<p>Because our sheet has to display different detail information depending on which task we tap on, we want our sheet to be binded to a task item that will act as a data source for the sheet.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">struct</span> <span class=\"token builtin\">Task</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">Identifiable</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> id <span class=\"token operator\">=</span> <span class=\"token function\">UUID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">var</span> text<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n  <span class=\"token keyword\">var</span> dueDate<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n  <span class=\"token keyword\">var</span> priority<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token builtin\">MySheetView</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">View</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> task<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Task</span>\n  \n  <span class=\"token keyword\">var</span> body<span class=\"token punctuation\">:</span> some <span class=\"token builtin\">View</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">Text</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"My Sheet View\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">padding</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">Text</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Task: <span class=\"token interpolation\"><span class=\"token delimiter variable\">\\(</span>task<span class=\"token punctuation\">.</span>text<span class=\"token delimiter variable\">)</span></span>\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">Text</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Due: <span class=\"token interpolation\"><span class=\"token delimiter variable\">\\(</span>task<span class=\"token punctuation\">.</span>dueDate<span class=\"token delimiter variable\">)</span></span>\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">Text</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Priority: <span class=\"token interpolation\"><span class=\"token delimiter variable\">\\(</span>task<span class=\"token punctuation\">.</span>priority<span class=\"token delimiter variable\">)</span></span>\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token builtin\">ContentView</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">View</span> <span class=\"token punctuation\">{</span>\n  @<span class=\"token builtin\">State</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> tasks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">Task</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Task 1\"</span><span class=\"token punctuation\">,</span> dueDate<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Wed\"</span><span class=\"token punctuation\">,</span> priority<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">Task</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Task 2\"</span><span class=\"token punctuation\">,</span> dueDate<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mon\"</span><span class=\"token punctuation\">,</span> priority<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">Task</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Task 3\"</span><span class=\"token punctuation\">,</span> dueDate<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Sun\"</span><span class=\"token punctuation\">,</span> priority<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">Task</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Task 4\"</span><span class=\"token punctuation\">,</span> dueDate<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Tue\"</span><span class=\"token punctuation\">,</span> priority<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">Task</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Task 5\"</span><span class=\"token punctuation\">,</span> dueDate<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mon\"</span><span class=\"token punctuation\">,</span> priority<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span>\n  @<span class=\"token builtin\">State</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> sheetTask<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Task</span><span class=\"token operator\">?</span>  <span class=\"token comment\">// 1</span>\n  \n  <span class=\"token keyword\">var</span> body<span class=\"token punctuation\">:</span> some <span class=\"token builtin\">View</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">List</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> task <span class=\"token keyword\">in</span>\n      <span class=\"token builtin\">HStack</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">Text</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">Spacer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">Button</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Detail\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"button clicked. <span class=\"token interpolation\"><span class=\"token delimiter variable\">\\(</span>task<span class=\"token punctuation\">.</span>text<span class=\"token delimiter variable\">)</span></span>\"</span><span class=\"token punctuation\">)</span>\n          sheetTask <span class=\"token operator\">=</span> task   <span class=\"token comment\">// 2</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">sheet</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span> $sheetTask<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> task <span class=\"token keyword\">in</span>  <span class=\"token comment\">// 3</span>\n      <span class=\"token function\">MySheetView</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">:</span> task<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ol>\n<li>Define a @State variable <code class=\"language-text\">sheetTask</code> that tracks the tapped task. </li>\n<li>assign the tapped task to the @State variable <code class=\"language-text\">sheetTask</code>.</li>\n<li>\n<p>Bind the @State variable (= the data source for the sheet) to the sheet, by passing it as <code class=\"language-text\">item</code> in  <code class=\"language-text\">sheet(item:onDismiss:content:)</code>.  </p>\n<ul>\n<li>When the @State variable <code class=\"language-text\">sheetTask</code> changes, the system dismisses the sheet and replaces it with a new one</li>\n</ul>\n</li>\n</ol>\n<h2>Common Mistakes</h2>\n<h3>Attaching the sheet view modifier to each row.</h3>\n<p>If we attach the sheet view modifier <code class=\"language-text\">sheet(item:onDismiss:content:)</code> to each row of the list, a single tap on a single button will modify each sheet view modifierâ€™s <code class=\"language-text\">item</code>, which makes each rowâ€™s sheet to be presented.</p>\n<p>So this will yield a warning like this: <em><code class=\"language-text\">SwiftUI [Presentation] / Attempt to present View on ... which is already presenting</code></em></p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">var</span> body<span class=\"token punctuation\">:</span> some <span class=\"token builtin\">View</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">List</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> task <span class=\"token keyword\">in</span>\n    <span class=\"token builtin\">HStack</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">Text</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span>\n      <span class=\"token function\">Spacer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token function\">Button</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Detail\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"button clicked. <span class=\"token interpolation\"><span class=\"token delimiter variable\">\\(</span>task<span class=\"token punctuation\">.</span>text<span class=\"token delimiter variable\">)</span></span>\"</span><span class=\"token punctuation\">)</span>\n        sheetTask <span class=\"token operator\">=</span> task  \n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">sheet</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span> $sheetTask<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> task <span class=\"token keyword\">in</span>  <span class=\"token comment\">// &lt;- here</span>\n\t    <span class=\"token function\">MySheetView</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">:</span> task<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","frontmatter":{"title":"Presenting a Detail Sheet from a Listâ€™s Row","date":"20 November, 2022","intro":"Create a list that shows a detail sheet view when a button of each row is tapped, and avoid a common mistake when attaching a sheet view modifier to a list. ","tags":["SwiftUI","modal","sheet"],"featuredImage":null}}},"pageContext":{"slug":"/blog/2022-11-19-SwiftUI-List-Sheet/2022-11-19-list-row-detail-sheet/"}},"staticQueryHashes":["2896309718","3159585216","3159585216"]}
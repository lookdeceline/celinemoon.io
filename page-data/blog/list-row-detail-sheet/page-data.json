{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/list-row-detail-sheet/","result":{"data":{"markdownRemark":{"html":"<h2>Goal of this post</h2>\n<p>The goal of this post is to create a list that shows each row’s detail information on a modal sheet, when we tap on a button placed at each row.</p>\n<div class=\"articleImage\" style=\"max-width: 100%; width:500px; margin: 50px auto; padding-bottom: 30px;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1773px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/650ee9c831041eeb061c65a6d6d1c304/35c52/goal.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 98.64636209813875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAACE4AAAhOAFFljFgAAACTklEQVR42t2UzWsTQRiHJzkWyUmRWhA8WQ/+HV5r8eQf04Ntpb0lvVki6EGQeApCDy2tiDkUIrSSFLrWplLZtM2mmY+d3c3Ozs5PZtPUqEUs9uQLD8sMM8++73yRra1G1XH2sbPzOZ2aeojJyXuYnn6EVutbur3dxMbGhzdkELlcLlcZGxtDPp9PCSEYIS0UCigUCm9Jt0t1EChwHqJe38L6+nvU69vw/b4JZB+Ucr9SqUyMj1+7PjMzkywvl1EqLZlSaQk/KJly+Tnm55/2yfFxJ2WMQ+sUxhhkYQziODE8Bk6Z9IvF4u1qtXpTSqlxNgIjMZzn+35KTk466PV6WWeapiPA0IEwKC4MhIxRY8cppUySJBiilMqElFKQTscDYxRa60w6ROvUcAV87cjw8ZO1+w8WP911u775U4ZCCCvsYlDy70KhAI/KYHZ2+c5iefVWj4m/EdoMWVbmaNiSeQL0bMlnayjEXwiPjjwIESAMY0SROicIYyMjg+4pv1A4Ws1Pwna7AykVGAuyozOEscBEoYLn0ctl2G57kDLOJEJE53AemjBM4HnsQqHdUc8bLNeVCQ8ODrKjMox/EnLOsbe3Bynl1QivfA3/c+HCwuWEWojIUCrxC8b+yPOYXyw+y4S+7yd2otba2Ls/ytnOa0Ip1/YaK2WfL5wTx4MswjDy5+bmJlZWVm4IIZKLMhy2oyjqE8dpvXKc/Xhz8yNWVzcy1tbeGdt2nFZ/d/fLS/v8E0Lyh4eHL1zX7TebTdRqNVOr1bJvo9GA7Xdd9/V3DJ+EJFDnvhIAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"goal\" title=\"\" src=\"/static/650ee9c831041eeb061c65a6d6d1c304/35c52/goal.png\" srcset=\"/static/650ee9c831041eeb061c65a6d6d1c304/35c52/goal.png 1773w\" sizes=\"(max-width: 1773px) 100vw, 1773px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</div>\n<h2>Presenting a Sheet</h2>\n<p>There are two ways to present a sheet using a view modifier.</p>\n<ol>\n<li>binding a sheet to a boolean</li>\n</ol>\n<p><a href=\"https://developer.apple.com/documentation/swiftui/view/sheet(ispresented:ondismiss:content:)\"><code class=\"language-text\">sheet(isPresented:onDismiss:content:)</code></a></p>\n<ol start=\"2\">\n<li>binding a sheet to an item that acts as a data source for the sheet</li>\n</ol>\n<p><a href=\"https://developer.apple.com/documentation/swiftui/view/sheet(item:ondismiss:content:)\"><code class=\"language-text\">sheet(item:onDismiss:content:)</code></a></p>\n<p>Because our sheet has to display different detail information depending on which task we tap on, we want our sheet to be binded to a task item that will act as a data source for the sheet.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">struct</span> <span class=\"token class-name\">Task</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Identifiable</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> id <span class=\"token operator\">=</span> <span class=\"token function\">UUID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">var</span> text<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span>\n  <span class=\"token keyword\">var</span> dueDate<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span>\n  <span class=\"token keyword\">var</span> priority<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Int</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">MySheetView</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">View</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> task<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Task</span>\n  \n  <span class=\"token keyword\">var</span> body<span class=\"token punctuation\">:</span> <span class=\"token keyword\">some</span> <span class=\"token class-name\">View</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"My Sheet View\"</span></span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">padding</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"Task: </span><span class=\"token interpolation-punctuation punctuation\">\\(</span><span class=\"token interpolation\">task<span class=\"token punctuation\">.</span>text</span><span class=\"token interpolation-punctuation punctuation\">)</span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"Due: </span><span class=\"token interpolation-punctuation punctuation\">\\(</span><span class=\"token interpolation\">task<span class=\"token punctuation\">.</span>dueDate</span><span class=\"token interpolation-punctuation punctuation\">)</span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"Priority: </span><span class=\"token interpolation-punctuation punctuation\">\\(</span><span class=\"token interpolation\">task<span class=\"token punctuation\">.</span>priority</span><span class=\"token interpolation-punctuation punctuation\">)</span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">ContentView</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">View</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attribute atrule\">@State</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> tasks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token class-name\">Task</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Task 1\"</span></span><span class=\"token punctuation\">,</span> dueDate<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Wed\"</span></span><span class=\"token punctuation\">,</span> priority<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Task</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Task 2\"</span></span><span class=\"token punctuation\">,</span> dueDate<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Mon\"</span></span><span class=\"token punctuation\">,</span> priority<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Task</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Task 3\"</span></span><span class=\"token punctuation\">,</span> dueDate<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Sun\"</span></span><span class=\"token punctuation\">,</span> priority<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Task</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Task 4\"</span></span><span class=\"token punctuation\">,</span> dueDate<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Tue\"</span></span><span class=\"token punctuation\">,</span> priority<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Task</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Task 5\"</span></span><span class=\"token punctuation\">,</span> dueDate<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Mon\"</span></span><span class=\"token punctuation\">,</span> priority<span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span>\n  <span class=\"token attribute atrule\">@State</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> sheetTask<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Task</span><span class=\"token operator\">?</span>  <span class=\"token comment\">// 1</span>\n  \n  <span class=\"token keyword\">var</span> body<span class=\"token punctuation\">:</span> <span class=\"token keyword\">some</span> <span class=\"token class-name\">View</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">List</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> task <span class=\"token keyword\">in</span>\n      <span class=\"token class-name\">HStack</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span>\n        <span class=\"token class-name\">Spacer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token class-name\">Button</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"Detail\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"button clicked. </span><span class=\"token interpolation-punctuation punctuation\">\\(</span><span class=\"token interpolation\">task<span class=\"token punctuation\">.</span>text</span><span class=\"token interpolation-punctuation punctuation\">)</span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n          sheetTask <span class=\"token operator\">=</span> task   <span class=\"token comment\">// 2</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">sheet</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span> $sheetTask<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> task <span class=\"token keyword\">in</span>  <span class=\"token comment\">// 3</span>\n      <span class=\"token class-name\">MySheetView</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">:</span> task<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ol>\n<li>Define a @State variable <code class=\"language-text\">sheetTask</code> that tracks the tapped task.</li>\n<li>assign the tapped task to the @State variable <code class=\"language-text\">sheetTask</code>.</li>\n<li>Bind the @State variable (= the data source for the sheet) to the sheet, by passing it as <code class=\"language-text\">item</code> in  <code class=\"language-text\">sheet(item:onDismiss:content:)</code>.\n<ul>\n<li>When the @State variable <code class=\"language-text\">sheetTask</code> changes, the system dismisses the sheet and replaces it with a new one</li>\n</ul>\n</li>\n</ol>\n<h2>Common Mistakes</h2>\n<h3>Attaching the sheet view modifier to each row.</h3>\n<p>If we attach the sheet view modifier <code class=\"language-text\">sheet(item:onDismiss:content:)</code> to each row of the list, a single tap on a single button will modify each sheet view modifier’s <code class=\"language-text\">item</code>, which makes each row’s sheet to be presented.</p>\n<p>So this will yield a warning like this: <em><code class=\"language-text\">SwiftUI [Presentation] / Attempt to present View on ... which is already presenting</code></em></p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-swift line-numbers\"><code class=\"language-swift\"><span class=\"token keyword\">var</span> body<span class=\"token punctuation\">:</span> <span class=\"token keyword\">some</span> <span class=\"token class-name\">View</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">List</span><span class=\"token punctuation\">(</span>tasks<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> task <span class=\"token keyword\">in</span>\n    <span class=\"token class-name\">HStack</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span>\n      <span class=\"token class-name\">Spacer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token class-name\">Button</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"Detail\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"button clicked. </span><span class=\"token interpolation-punctuation punctuation\">\\(</span><span class=\"token interpolation\">task<span class=\"token punctuation\">.</span>text</span><span class=\"token interpolation-punctuation punctuation\">)</span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n        sheetTask <span class=\"token operator\">=</span> task  \n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">sheet</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span> $sheetTask<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> task <span class=\"token keyword\">in</span>  <span class=\"token comment\">// &lt;- here</span>\n\t    <span class=\"token class-name\">MySheetView</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">:</span> task<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","frontmatter":{"title":"Presenting a Detail Sheet from a List’s Row","date":"20 November, 2022","intro":"Create a list that shows a detail sheet view when a button of each row is tapped, and avoid a common mistake when attaching a sheet view modifier to a list. ","tags":["SwiftUI"],"featuredImage":null}}},"pageContext":{"slug":"/blog/2022-11-19-SwiftUI-List-Sheet/2022-11-19-list-row-detail-sheet/"}},"staticQueryHashes":["2393440379","3159585216"],"slicesMap":{}}